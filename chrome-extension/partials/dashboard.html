<div id="user-info" class="row" ng-if="!gameDetails">
    <div class="col-md-3">
      <img src="{{user.info.avatarfull}}" />
    </div>
    <div class="col-md-9">
      <h1>{{user.info.personaname}}</h1>
      <h3>{{user.info.realname}}</h3>
    </div>
  </div>
</div>

<!--
<div  style="float: left">
  <img src="{{user.info.avatarfull}}" /><br>
  <h1>{{user.info.personaname}}</h1>
  <h3>{{user.info.realname}}</h3>
  <p><a href="{{user.info.profileurl}}">Perfil</a></p>
</div>

<div style="float: right">
  <br>
  Panels: <br>
  Tiempo jugado: {{games.hoursPlayed/60}} horas<br>
  Total games (+ DLC) = {{games.length}}<br>
  Juegos: xx<br>
  achievements: xx<br>
  completed games: xx<br>
  perfect games: xx<br>
  Steam level: xxx<br>
  Barajas necesarias para subir al pr√≥ximo nivel: XX / 10 niveles: xx<br>
  CTA_ launch random game
</div>

<div style="clear: both;"/></div>
-->


<div id="game-details" ng-controller="gameDetails" ng-if="gameDetails" style="background-image: url('http://cdn.akamai.steamstatic.com/steam/apps/{{gameDetails.appid}}/page_bg_generated_v6b.jpg');">

    <div class="upper">
      <div class="container">
        <div class="pull-right text-right game-updated">
          Updated {{gameDetails.updated | date:'dd MMM, HH:mm:ss'}} 
          <span class="btn-refresh" ng-click="refreshGameDetails();"><i class="ion-android-refresh"></i></span>
        </div>

        <div class="game-image">
          <a href="steam://rungameid/{{gameDetails.appid}}" class="game-image-overlay"><i class="ion-steam"></i> Launch</a>
          <img src="http://cdn.akamai.steamstatic.com/steam/apps/{{gameDetails.appid}}/capsule_231x87.jpg" />
        </div>
        <div class="game-name">{{gameDetails.name}}</div>
      </div>
    </div>

    <div class="lower">
      <div class="container">

        <div class="pull-right game-status">
          <div class="box game-achievements" ng-if="gameDetails.achievements"><h4>Achievements</h4><i class="fa fa-trophy"  style="font-size: 20px;"></i><br>{{gameDetails.achieved}} / {{gameDetails.achievements}} ( {{((100*gameDetails.achieved)/gameDetails.achievements).toFixed(0)}}% )</div>
          <div class="box game-status {{gameDetails.status}}" ng-click="changeStatus()">
            <h4>Game status</h4>
            <i class="fa fa-cubes" ng-if="!gameDetails.status || gameDetails.status == 'Backlog'" style="font-size: 20px;"></i>
            <i class="ion-android-notifications-off ng-scope" ng-if="gameDetails.status == 'Abandoned'"></i>
            <i class="ion-flag" ng-if="gameDetails.status == 'Completed'"></i>
            <i class="ion-ribbon-b" ng-if="gameDetails.status == 'Mastered'"></i>
            <br>{{gameDetails.status || "Backlog"}}<i class="change-status ion-android-sync"></i>
          </div>
          <div class="box game-playing" style="display: none;"><h4>Currently playing</h4><i class="fa fa-user"></i></div>
          <p class="game-updated ng-scope" ng-if="gameDetails.status == 'Abandoned'" style=" display: none; font-size: 10px;">If you abandon a game, it won't appear on the game list</p>
          <!-- Currently playing: yes / no -->
          <!--
          <br>
          status: shelved (abandoned), backlog, completed, mastered, playing.<br>
          flags: replay, favorited
          -->
        </div>

        <div class="game-scores">
          <div style="display: inline-block;" class="game-metascore" ng-if="gameDetails.metascore"><i class="fa fa-star"></i> {{gameDetails.metascore}} </div>
          <div style="display: inline-block;" class="game-steamscore" ng-if="gameDetails.steamscore"><i class="fa fa-steam"></i> {{gameDetails.steamscore}}, {{gameDetails.steamscoreAlt}}</div>
          <a class="btn-store" href="http://store.steampowered.com/app/{{gameDetails.appid}}" target="_blank" style="display: none;"><i class="ion-steam"></i> Store</a>
        </div>

        <div class="game-features" ng-if="gameDetails.updated">
          <div class="tooltip" ng-class="{'not-available': !gameDetails.singlePlayer}"  ><i class="ion-ios-person"></i>       <span class="tooltip-content clearfix">Single Player</span></div>
          <div class="tooltip" ng-class="{'not-available': !gameDetails.multiPlayer}"   ><i class="ion-ios-people"></i>      <span class="tooltip-content clearfix">Multiplayer</span></div>
          <div class="tooltip" ng-class="{'not-available': !gameDetails.mmo}"           ><i class="ion-earth"></i>        <span class="tooltip-content clearfix">Mmo</span></div>

          <div class="tooltip" ng-class="{'not-available': !gameDetails.coop}"          ><i class="ion-ios-infinite"></i>   <span class="tooltip-content clearfix">Co-op</span></div>
          <div class="tooltip" ng-class="{'not-available': !gameDetails.localCoop}"     ><i class="ion-monitor"></i>   <span class="tooltip-content clearfix">Local Co-op</span></div>

          <div class="tooltip" ng-class="{'not-available': !gameDetails.controller}"    ><i class="ion-ios-game-controller-b"></i>    <span class="tooltip-content clearfix">Controller support</span></div>
          <div class="tooltip" ng-class="{'not-available': !gameDetails.achievements}"  ><i class="fa fa-certificate"></i><span class="tooltip-content clearfix">Achievements</span></div>
        </div>

        <div class="game-tags">
          <span class="tag" ng-class="{'tag-active': filters.tags.indexOf(tag) > -1}" ng-repeat="tag in gameDetails.tags | limitTo: 3" ng-click="filterTag(tag)">{{tag}}</span>
        </div>

      </div>
    </div>

</div>

<div class="filter-bar" ng-class="{'has-details': gameDetails}">
  <div class="container" style="width: 970px;">
    <div>
      <i class="fa fa-search" style=" position: absolute; top: 20px; margin-left: 10px; opacity: 0.4; font-size: 12px;"></i>
      <input type="text" placeholder="Filter by name" ng-model="filters.string" ng-change="search()" />

      <div class="separator"></div>

      <i class="fa fa-filter"       ng-if="!toggleTags" style="position: absolute; top: 20px; margin-left: 97px; opacity: 0.4; font-size: 12px;"></i>
      <i class="fa fa-minus-circle" ng-if="toggleTags"  style="position: absolute; top: 20px; margin-left: 97px; opacity: 0.4; font-size: 12px;"></i>

      <div class="tags-selector" ng-click="toggleTags = !toggleTags">Select tags</div>

      <div class="separator"></div>

      <select ng-model="filters.orderBy" ng-change="search()">
        <option selected="selected" disabled="disabled">Sort by...</option>
        <option value="-playtime_forever">Time played</option>
        <option value="-metascore">Metascore</option>
        <option value="-steamscore">Steam Score</option>
        <option value="-achievementProgress">Achievements</option>
        <!-- <option>achievement %</option> -->
      </select>

      <div class="inline-block pull-right" style="margin-top: 3px;">
        <div class="filter tooltip" ng-class="{'filter-active': filters.singlePlayer}"  ng-click="filters.singlePlayer = !filters.singlePlayer; search()" ><i class="ion-ios-person"></i>       <span class="tooltip-content clearfix">Single Player</span></div>
        <div class="filter tooltip" ng-class="{'filter-active': filters.multiPlayer}"   ng-click="filters.multiPlayer = !filters.multiPlayer; search()" ><i class="ion-ios-people"></i>        <span class="tooltip-content clearfix">Multiplayer</span></div>
        <div class="filter tooltip" ng-class="{'filter-active': filters.mmo}"           ng-click="filters.mmo = !filters.mmo; search()" ><i class="ion-earth"></i>                        <span class="tooltip-content clearfix">Mmo</span></div>

        <div class="filter tooltip" ng-class="{'filter-active': filters.coop}"          ng-click="filters.coop = !filters.coop; search()" ><i class="ion-ios-infinite"></i>                   <span class="tooltip-content clearfix">Co-op</span></div>
        <div class="filter tooltip" ng-class="{'filter-active': filters.localCoop}"     ng-click="filters.localCoop = !filters.localCoop; search()" ><i class="ion-monitor"></i>         <span class="tooltip-content clearfix">Local Co-op</span></div>

        <div class="filter tooltip" ng-class="{'filter-active': filters.controller}"    ng-click="filters.controller = !filters.controller; search()" ><i class="ion-ios-game-controller-b"></i>        <span class="tooltip-content clearfix">Controller support</span></div>
        <div class="filter tooltip" ng-class="{'filter-active': filters.achievements}"  ng-click="filters.achievements = !filters.achievements; search()" ><i class="fa fa-certificate"></i><span class="tooltip-content clearfix">Achievements</span></div>
      </div>


    </div>

    <div style="margin-top: 10px;">
      <span class="pull-right"><i class="ion-grid"></i></span>
      <span class="pull-right" style="padding-right: 8px; line-height: 21px; margin-bottom: 5px;">Total of {{games.length}} games</span>


      <div class="filter" ng-if="filters.singlePlayer"  ng-class="{'filter-active': filters.singlePlayer}"  ng-click="filters.singlePlayer = !filters.singlePlayer; search()" ><i class="ion-ios-person"></i></div>
      <div class="filter" ng-if="filters.multiPlayer"   ng-class="{'filter-active': filters.multiPlayer}"   ng-click="filters.multiPlayer = !filters.multiPlayer; search()" ><i class="ion-ios-people"></i></div>
      <div class="filter" ng-if="filters.mmo"           ng-class="{'filter-active': filters.mmo}"           ng-click="filters.mmo = !filters.mmo; search()" ><i class="ion-earth"></i></div>

      <div class="filter" ng-if="filters.coop"          ng-class="{'filter-active': filters.coop}"          ng-click="filters.coop = !filters.coop; search()" ><i class="ion-ios-infinite"></i></div>
      <div class="filter" ng-if="filters.localCoop"     ng-class="{'filter-active': filters.localCoop}"     ng-click="filters.localCoop = !filters.localCoop; search()" ><i class="ion-monitor"></i></div>

      <div class="filter" ng-if="filters.controller"    ng-class="{'filter-active': filters.controller}"    ng-click="filters.controller = !filters.controller; search()" ><i class="ion-ios-game-controller-b"></i></div>
      <div class="filter" ng-if="filters.achievements"  ng-class="{'filter-active': filters.achievements}"  ng-click="filters.achievements = !filters.achievements; search()" ><i class="fa fa-certificate"></i></div>

      <div class="filter tag-active" ng-repeat="tag in filters.tags" ng-click="filterTag(tag)">{{tag}} <i class="fa fa-times"></i></div>
    </div>

  </div>
</div>


<div class="tags-container" ng-if="toggleTags" ng-class="{'has-details': gameDetails}">
  <span ng-repeat="tag in allTags | orderBy: 'toString()'" ng-click="filterTag(tag)" ng-class="{'faded': tags.indexOf(tag) == -1, 'tag-active': filters.tags.indexOf(tag) > -1}">
    {{tag}}
  </span>
</div>


<!-- games-list-->
<!-- Listing of current db games -->
  <div class="games-list" ng-class="(app.listStyle)?app.listStyle:'cards'">

    <div class="scan-alert">
      <p class="tooltip">Your library is being currently scanned <i class="fa fa-spin ion-load-c"></i><span class="tooltip-content clearfix">Single Player</span></p>
    </div>

    <div class="warning" ng-if="filters.orderBy == '-metascore'">
      <i class="fa fa-warning"></i> Some games might not appear on the list because it has no metascore or because we don't know it's score.
    </div>

    <div class="warning" ng-if="games.length == 0">
      <i class="fa fa-warning"></i> No games match the selected filters
    </div>

    <div ng-repeat="game in games | orderBy : filters.orderBy | limitTo : filters.limit track by game.appid" class="game-card" ng-click="openDetails(game.appid)">
    <div class="bookmark" ng-if="($index%10 == 0) && $index > 0"><i class="ion-bookmark"></i> {{ ::$index}}</div>
      <div class="game-image" ng-class="{completed: game.status.completed == true, mastered: game.status.mastered == true}" ><img src="http://cdn.akamai.steamstatic.com/steam/apps/{{game.appid}}/capsule_231x87.jpg" /></div>
      <div class="game-name">{{game.name}}</div>

      <div class="game-playime card-second-line"   ng-if="filters.orderBy == '-playtime_forever'">Played {{game.playtime_forever | minutesToHours}} <span class="pull-right"><i class="fa fa-star" ng-if="game.metascore"></i> {{game.metascore}}  <i class="fa fa-steam" ng-if="game.steamscore" style="padding-left: 8px;"></i> {{game.steamscore}}</span></div>
      <div class="game-metascore card-second-line" ng-if="filters.orderBy == '-metascore'"><i class="fa fa-star"></i> {{game.metascore}}</div>
      <div class="game-steamscore card-second-line" ng-if="filters.orderBy == '-steamscore'"><i class="fa fa-steam"></i> {{game.steamscore}}, {{game.steamscoreAlt}}</div>
      <div class="game-achievements card-second-line" ng-if="filters.orderBy == '-achievementProgress'"><i class="fa fa-certificate" style="margin-right: 3px;"></i> {{game.achieved}} / {{game.achievements}} ( {{((100*game.achieved)/game.achievements).toFixed(0)}}% )</div>
      
      <div class="game-tags card-second-line"      ng-if="filters.tags.length > 0">
        <span ng-repeat="tag in game.tags | limitTo : 5" style="display: inline-block; padding: 1px 5px; color: white; background-color: #343434; margin: 3px 3px; border-radius: 2px;">{{tag}}</span>
      </div>

      <!-- <div class="game-status card-second-line"></div> -->

      <div class="gallery_archive_desc" style="display: none;">
        <h4>{{game.name}}</h4>
        <div class="post_detail">{{game.tags | limitTo: 2}}</div>
      </div>

    </div>

  </div>


<!--
<hr>
<h2>Your tags</h2>
<span ng-repeat="tag in tags track by $index" style="display: inline-block; padding: 1px 5px; color: white; background-color: #343434; margin: 3px 3px; border-radius: 2px;">
  {{tag}}
</span>

<hr>
<h2>Completed games</h2>
-

<hr>
<h2>Currently playing</h2>
-
<hr>
<h2>Recommended tags for you</h2>
<span ng-repeat="tag in dynamic.rgRecommendedTags" style="display: inline-block; padding: 1px 5px; color: white; background-color: #343434; margin: 3px 3px; border-radius: 2px;">
  {{tag.name}}
</span>

-->
